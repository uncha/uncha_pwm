(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{407:function(t,e,n){"use strict";e.a={computed:{authUser:function(){return this.$store.getters.authUser}},mounted:function(){}}},449:function(t,e,n){var content=n(549);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(83).default)("31a033be",content,!0,{sourceMap:!1})},450:function(t,e,n){var content=n(551);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(83).default)("280ec008",content,!0,{sourceMap:!1})},458:function(t,e,n){"use strict";n.r(e);n(10),n(14),n(17),n(11),n(63);var r=n(23),o={props:{links:{type:Array,required:!0}},data:function(){return{nickName:"",selectLink:""}},computed:{list:function(){return this.links.slice(0,2)}},watch:{links:function(){var t=this;this.nickName=this.list[0].baby_nick_name,this.$emit("selectLink",this.list[0]),this.selectLink=this.list[0],_.forEach(this.list,function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n,i){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadBaby(n);case 2:r=e.sent,t.$set(n,"profile_image",r[0].profile_image);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},mounted:function(){},methods:{onSelect:function(link){this.$emit("selectLink",link),this.selectLink=link},loadBaby:function(t){var e=this;return new Promise((function(n){e.$axios.get("/api/user/".concat(t.baby_nick_names)).then((function(t){n(t.data)}))}))},getProfileImageURL:function(t){return"localhost:3000"==window.location.host?"http://localhost:9102".concat(t):t}}},c=(n(548),n(56)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"linked"}},[t.links.length>0?n("div",{staticClass:"linked-babies text-center"},t._l(t.list,(function(link,i){return n("b-button",{staticClass:"btn-link d-block w-100",class:{on:link.id==t.selectLink.id,"bg-white":0==link.status,bg0:1==link.status&&0==i,bg1:1==link.status&&1==i},on:{click:function(e){return t.onSelect(link)}}},[n("div",{staticClass:"face float-left"},[n("div",{style:{background:"url("+t.getProfileImageURL(link.profile_image)+")"}})]),t._v(" "),n("div",{staticClass:"float-left"},[0==link.status?[n("p",{staticClass:"mb-0 text-left nick-name"},[t._v(t._s(link.baby_nick_names))]),t._v(" "),n("p",{staticClass:"mb-0 status"},[t._v("연결중...")])]:[n("p",{staticClass:"mb-0 text-left nick-name"},[t._v(t._s(link.baby_nick_names))]),t._v(" "),n("p",{staticClass:"mb-0 status"},[t._v("연결되었습니다.")])]],2)])})),1):n("div",{staticClass:"linked-babies not-linked text-center"},[n("b-button",{staticClass:"btn-link",attrs:{variant:"white"},on:{click:function(e){return t.$router.push({path:"/mom/search-baby"})}}},[n("img",{staticClass:"face2",attrs:{src:"/images/group_34.png"}}),t._v(" 자녀를 연결해 주세요.\n    ")]),t._v(" "),t._m(0)],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"exclamation"},[e("img",{attrs:{src:"/images/icon_warning.png"}})])}],!1,null,"da3e278a",null);e.default=component.exports},459:function(t,e,n){"use strict";n.r(e);n(7),n(4),n(103),n(10),n(17),n(11),n(33),n(63);var r=n(23),o=n(407),c=n(404),l={mixins:[o.a],components:{top:c.default},data:function(){return{questList:[],selectGroup:"",confirmQuest:"",links:[],confirmData:"",intervalId:""}},computed:{authUser:function(){return this.$store.getters.authUser},selectLink:function(){return this.$store.getters.selectLink},giftImageURL:function(){return"localhost:3000"==window.location.host?"http://localhost:9102".concat(this.selectGroup.success_gift):this.selectGroup.success_gift},confirmDataImageURL:function(){return"localhost:3000"==window.location.host?"http://localhost:9102".concat(this.confirmData.execution_pic):this.confirmData.execution_pic},successCount:function(){return _.filter(this.questList,(function(t){return 1==t.success_state})).length},currentQuest:function(){var t=_.find(this.questList,(function(t){return moment(t.start_date).valueOf()<=moment().valueOf()}));return t},nextQuest:function(){var t=this,e=_.find(this.questList,(function(e){return moment(e.start_date).valueOf()>moment(t.currentQuest.start_date).valueOf()}));return e},executionList:function(){return _.filter(this.questList,(function(t){return 0!=t.complete_sate}))},successIndex:function(){var t=this,e=0,n=0;return _.forEach(this.questList,(function(r,i){1==r.success_state&&n<t.selectGroup.success_count&&(n++,e++)})),e==this.selectGroup.success_count?e:-1},ingQuest:function(){return _.filter(this.questList,(function(t,i){return 0==t.success_state}))}},mounted:function(){var t=this;this.init(),this.intervalId=setInterval((function(){t.init()}),3e4)},methods:{init:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadSelectGroup(t.selectLink);case 2:return n=e.sent,t.selectGroup=n[0],e.next=6,t.loadQuestList(t.selectGroup);case 6:return t.questList=e.sent,e.next=9,t.$axios.get("/api/linked/mom",{params:{mom_nick_name:t.authUser}}).then((function(e){t.links=e.data,console.log("RES.DATA4444",e),t.completeCheck()}));case 9:case"end":return e.stop()}}),e)})))()},questConfirm:function(t,e){this.confirmQuest=_.find(this.questList,(function(e){return e.id==t})),this.confirmData=e,this.$refs["modal-quest-confirm"].show()},loadSelectGroup:function(link){var t=this;return new Promise((function(e){t.$axios.get("/api/selectQuestGroup/".concat(link.id)).then((function(t){e(t.data)}))}))},loadQuestList:function(t){var e=this;return new Promise((function(n){e.$axios.get("/api/selectQuest/".concat(t.id)).then((function(t){var e=_.sortBy(t.data,(function(t){return t.start_date}));n(e)}))}))},getFormatDate:function(t){return"".concat(moment(t).month()+1,"월").concat(moment(t).date(),"일(").concat(this.getWeekName(moment(t).day()),")")},getFormatTime:function(t){var e=moment(t).hour();return e>12?"오후 ".concat(e-12):"오전 ".concat(e)},questStatus:function(){if(0==this.questList.length)return"";var t=moment(this.questList[0].start_date).diff(moment(),"day");return"".concat(t+1,"일째 진행중")},handleSuccess:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.confirmQuest),t.$axios.post("/api/selectQuest/".concat(t.confirmQuest.id),{success_state:1}).then((function(e){t.resetQuestList(),t.$refs["modal-quest-confirm"].hide()}));case 2:case"end":return e.stop()}}),e)})))()},handleFailed:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$axios.post("/api/selectQuest/".concat(t.confirmQuest.id),{success_state:2}).then((function(e){t.resetQuestList(),t.$refs["modal-quest-confirm"].hide()}));case 1:case"end":return e.stop()}}),e)})))()},resetQuestList:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadQuestList(t.selectGroup);case 2:t.questList=e.sent,t.completeCheck();case 4:case"end":return e.stop()}}),e)})))()},executionPicURL:function(t){return"localhost:3000"==window.location.host?"http://localhost:9102".concat(t):t},completeCheck:function(){var t=this;this.$nextTick((function(){t.successCount!=t.questList.length&&t.successCount!=t.selectGroup.success_count||(console.log("complete"),t.$refs["modal-quest-complete"].show())}))},cancelComplete:function(){this.$refs["modal-quest-complete"].hide()},successComplete:function(){var t=this;this.$axios.post("/api/completeQuestGroup/".concat(this.selectGroup.id),{state:"1"}).then((function(e){t.$router.push({path:"/mom/quest/ing/complete"})}))},goConfirm:function(){"1"==this.selectGroup.complete_state?this.$router.push({path:"/mom/quest/ing/complete"}):this.$router.push({path:"/mom/quest/ing"})},getProfileImageURL:function(t){return"localhost:3000"==window.location.host?"http://localhost:9102".concat(t):t}},destroyed:function(){this.intervalId&&window.clearInterval(this.intervalId)}},d=(n(550),n(56)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"quest-wrapper"},[n("div",{staticClass:"profile-image children"},[n("div",{staticStyle:{"background-size":"cover",width:"100%",height:"100%"},style:{background:"url("+t.getProfileImageURL(t.selectLink.profile_image)+")"}})]),t._v(" "),n("div",{staticClass:"text-center children-name"},[t._v(t._s(t.selectLink.baby_nick_names))]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"current-quest"},[n("p",[t._v("현재 수행중 퀘스트")]),t._v(" "),n("p",{staticClass:"quest-name"},[t._v(t._s(t.ingQuest[0]&&t.ingQuest[0].title))])]),t._v(" "),n("div",{staticClass:"divine"}),t._v(" "),n("div",{staticClass:"quest-list"},[0==t.executionList.length?n("div",{staticClass:"text-center"},[n("img",{attrs:{src:"/images/img-carrot.svg"}}),t._v(" "),t._m(1)]):t._e(),t._v(" "),n("ul",{staticClass:"list"},t._l(t.executionList,(function(e){return n("li",{on:{click:function(n){return t.questConfirm(e.id,e)}}},[n("b-row",{attrs:{"no-gutters":""}},[n("b-col",{staticClass:"date",attrs:{cols:"2"}},[1==e.success_state?n("img",{staticClass:"ico",attrs:{src:"/images/ico-quest-success.svg"}}):n("img",{staticClass:"ico",attrs:{src:"/images/ico-quest-notyet.svg"}})]),t._v(" "),n("b-col",{staticClass:"quest-title",class:{success:1==e.success_state,failed:2==e.success_state},attrs:{cols:"7"}},[t._v(t._s(e.title)+"\n            ")])],1)],1)})),0)]),t._v(" "),n("div",{staticClass:"bottom-wrap text-center"},[n("a",{staticClass:"quest-status",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goConfirm(e)}}},[t._v("\n        "+t._s(t.selectGroup.success_count)+"개 중 "),n("span",{staticClass:"text-primary"},[t._v(t._s(t.successCount))]),t._v("개달성\n        "),n("img",{attrs:{src:"/images/btn-next.svg"}})])])]),t._v(" "),n("b-modal",{ref:"modal-quest-confirm",attrs:{centered:"","hide-header":"","hide-footer":""}},[n("div",{staticClass:"text-center"},[n("p",{staticClass:"quest-title"},[t._v('"'+t._s(t.confirmQuest.title)+'"')]),t._v(" "),n("p",{staticClass:"question"},[t._v("퀘스트를 달성했나요?")])]),t._v(" "),n("div",[n("img",{staticClass:"confirm-data-image",attrs:{src:t.confirmDataImageURL}})]),t._v(" "),n("div",{staticClass:"text-center"},[n("b-row",[n("b-col",{staticClass:"p-1"},[n("b-button",{attrs:{variant:"light"},on:{click:function(e){return t.handleFailed()}}},[t._v("실패\n          ")])],1),t._v(" "),n("b-col",{staticClass:"p-1"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.handleSuccess()}}},[t._v("성공!\n          ")])],1)],1)],1)]),t._v(" "),n("b-modal",{ref:"modal-quest-complete",attrs:{centered:"","hide-header":"","hide-footer":""}},[n("div",{staticClass:"text-center"},[n("p",{staticClass:"quest-title"},[t._v('"퀘스트를 완료하시겠습니까?"')])]),t._v(" "),n("div",{staticClass:"text-center m-3"},[n("b-row",[n("b-col",{staticClass:"p-1",attrs:{cols:"5"}},[n("b-button",{attrs:{variant:"light"},on:{click:function(e){return t.cancelComplete()}}},[t._v("취소\n          ")])],1),t._v(" "),n("b-col",{staticClass:"p-1",attrs:{cols:"7"}},[n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.successComplete()}}},[t._v("완료\n          ")])],1)],1)],1)])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center mb-6 ing"},[e("span",[this._v("퀘스트 진행중")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"first-message"},[this._v("\n          수아와 함께하는 첫 퀘스트가 진행중입니다."),e("br"),this._v("\n          당근을 얻지 못해도 괜찮아요~"),e("br"),this._v("\n          함께하는 과정을 재미있게 즐겨 주세요!"),e("br"),this._v(" "),e("br"),this._v("\n          아이와 함께하는 퀘스트는 무제한이니까요\n        ")])}],!1,null,"2699dd97",null);e.default=component.exports},548:function(t,e,n){"use strict";n(449)},549:function(t,e,n){(e=n(82)(!1)).push([t.i,".nick-name[data-v-da3e278a]{font-size:1rem}.linked-babies .btn-link[data-v-da3e278a]{border:0;border-radius:6.25rem;padding:.125rem .9375rem .125rem .125rem;font-size:.875rem;color:#000;text-decoration:none;margin-right:.75rem;position:relative;margin-bottom:1.875rem}.linked-babies .btn-link.bg0[data-v-da3e278a],.linked-babies .btn-link.bg1[data-v-da3e278a]{background:#fff}.linked-babies .btn-link.on[data-v-da3e278a]:after{content:url(/images/icon-link-checked.svg);float:right;top:.625rem;position:relative}.linked-babies.not-linked .exclamation[data-v-da3e278a]{position:relative;top:-50px;right:-75px}.linked-babies.not-linked .exclamation img[data-v-da3e278a]{width:1.5rem}.face[data-v-da3e278a]{width:2.75rem;height:2.75rem;margin-right:.375rem}.face>div[data-v-da3e278a]{background-size:cover!important;width:100%;height:100%;border-radius:100%}.face2[data-v-da3e278a]{width:2.25rem;height:2rem;margin-right:.375rem}.status[data-v-da3e278a]{color:#1d7ff1;font-size:14px}",""]),t.exports=e},550:function(t,e,n){"use strict";n(450)},551:function(t,e,n){(e=n(82)(!1)).push([t.i,'.today-quest[data-v-2699dd97]{background:#497ff5;color:#fff;box-shadow:0 5px 10px #ccc;margin-bottom:1.875rem;padding:1.875rem 0}.today-quest .date[data-v-2699dd97]{font-size:1rem;margin-bottom:.625rem}.today-quest .title[data-v-2699dd97]{font-weight:600;font-size:1.25rem;margin-bottom:1.875rem}.today-quest .description[data-v-2699dd97]{font-size:.875rem;color:#497ff5;background:#fff;border-radius:2.5rem;width:12.5rem;line-height:2.5rem;text-align:center;margin:0 auto}.div[data-v-2699dd97]{background:#f5f5f5;height:1.125rem;position:absolute;width:100%;left:0}.quest-list[data-v-2699dd97]{margin-top:1.5625rem}.quest-list .t1[data-v-2699dd97]{font-size:1rem;line-height:1.875rem}.quest-list .quest-status[data-v-2699dd97]{font-size:.875rem;line-height:1.875rem;color:#497ff5;text-align:right}.total-success[data-v-2699dd97]{font-size:1.125rem;line-height:1.875rem;color:#000;margin-top:.625rem}.total-success .count[data-v-2699dd97]{color:#497ff5}.quest-list .date[data-v-2699dd97]{font-size:.8125rem;line-height:3rem;color:#000;font-family:NotoSansCJKkr-Regular}.quest-list .quest-title[data-v-2699dd97]{font-size:.875rem;line-height:3rem}.quest-list .quest-title.success[data-v-2699dd97]{color:#497ff5;text-decoration:line-through}.quest-list .quest-title.failed[data-v-2699dd97]{color:#aaa;text-decoration:line-through}.gift[data-v-2699dd97]{margin-top:1.5625rem;margin-bottom:2.0625rem}.gift img[data-v-2699dd97]{max-width:100%;border-radius:.3125rem}.modal-body .quest-title[data-v-2699dd97]{font-size:1.5rem;margin-bottom:0;margin-top:1.875rem}.modal-body .question[data-v-2699dd97]{font-size:1.125rem;margin-bottom:3.75rem}.quest-list-total>ul[data-v-2699dd97]:after{clear:both;content:"";display:block}.quest-list-total>ul>li[data-v-2699dd97]{width:20%;float:left;margin-bottom:1.125rem}.quest-list-total>ul>li .ico[data-v-2699dd97]{width:3rem;height:3rem}.date[data-v-2699dd97]{font-size:.875rem}.execution-image[data-v-2699dd97]{width:2.75rem;height:2.75rem;border-radius:4px}.confirm-data-image[data-v-2699dd97]{width:100%;box-shadow:2px 2px 10px 5px rgba(0,0,0,.2);border-radius:5px;margin-bottom:2.5rem}.current-quest[data-v-2699dd97]{background:#1ec89b;border-radius:1rem;padding:.875rem .875rem 2.25rem;color:#fff;margin-bottom:1.875rem}.current-quest p[data-v-2699dd97]{margin-bottom:0;font-weight:400}.current-quest .quest-name[data-v-2699dd97]{font-weight:500;margin-top:1.25rem;font-size:1.25rem}.quest-status[data-v-2699dd97]{color:#000}.first-message[data-v-2699dd97]{color:#aaa;font-size:.875rem;margin-top:1rem}.profile-image[data-v-2699dd97]{width:5rem;height:5rem;position:relative;margin:0 auto}.profile-image>div[data-v-2699dd97]{background-size:cover!important;border-radius:100%}.children-name[data-v-2699dd97]{font-size:1.25rem;padding:.3125rem;font-weight:700}.ing>span[data-v-2699dd97]{background:#1d7ff1;color:#fff;border-radius:.75rem;font-size:.875rem;padding:.125rem .625rem}.list[data-v-2699dd97]{padding-bottom:9.375rem}',""]),t.exports=e},588:function(t,e,n){"use strict";n.r(e);n(17),n(33),n(63);var r=n(23),o=n(407),c=n(458),l=n(460),d=n(459),m={mixins:[o.a],components:{"linked-babies":c.default,"side-bar":l.a,"quest-status":d.default},data:function(){return{links:[],selectLink:"",isIng:!1,intervalId:"",selectGroup:""}},fetch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/linked/mom",{params:{mom_nick_name:t.authUser}}).then((function(e){t.links=e.data}));case 2:case"end":return e.stop()}}),e)})))()},computed:{authUser:function(){return this.$store.getters.authUser}},mounted:function(){var t=this;this.intervalId=window.setInterval((function(){t.$fetch()}),5e3)},methods:{onSelectLink:function(link){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadSelectGroup(link);case 2:t.selectGroup=e.sent,t.selectGroup.length>0?t.isIng=!0:t.isIng=!1,t.selectLink=link,t.$store.commit("setSelectLink",link);case 6:case"end":return e.stop()}}),e)})))()},loadSelectGroup:function(link){var t=this;return new Promise((function(e){t.$axios.get("/api/selectQuestGroup/".concat(link.id)).then((function(t){e(t.data)}))}))},goConfirm:function(){"1"==this.selectGroup[0].complete_state?this.$router.push({path:"/mom/quest/ing/complete"}):this.$router.push({path:"/mom/quest/ing"})}},destroyed:function(){window.clearInterval(this.intervalId)}},f=n(56),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("side-bar",{attrs:{links:t.links}}),t._v(" "),!1===t.isIng?[t._m(0),t._v(" "),n("linked-babies",{attrs:{links:t.links},on:{selectLink:t.onSelectLink}}),t._v(" "),n("div",{staticClass:"bottom-wrap"},[t.selectLink&&0!=t.selectLink.status?[t._m(1),t._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return e.preventDefault(),t.$router.push({path:"/mom/quest/create/select-quest"})}}},[t._v("\n          퀘스트\n          만들기\n        ")])]:[n("b-button",{staticClass:"btn-create-quest",attrs:{variant:"light"}},[n("span",{staticClass:"create-text"},[t._v("\n            퀘스트\n            만들기\n            ")])])]],2)]:[n("quest-status")]],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[this._v("\n      퀘스트를"),e("br"),this._v("\n      만들어보세요!\n    ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"ing text-center active"},[e("img",{attrs:{src:"/images/illust.png"}})])}],!1,null,"7932cae7",null);e.default=component.exports;installComponents(component,{SideBar:n(406).default,LinkedBabies:n(458).default,QuestStatus:n(459).default})}}]);